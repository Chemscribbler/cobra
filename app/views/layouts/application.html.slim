doctype html
html
  head
    title Cobra
    = csrf_meta_tags
    = stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload'
    = javascript_include_tag 'application', 'data-turbolinks-track': 'reload'
    = favicon_link_tag 'favicon.ico'

  body
    nav.navbar.navbar-expand-lg.fixed-top.navbar-dark.dontprint
      .container
        = link_to "Cobra #{(' - ' + @tournament.name) if @tournament}", root_path, class: 'navbar-brand'
        button.navbar-toggler type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
          span.navbar-toggler-icon
        #navbarNav.collapse.navbar-collapse
          ul.navbar-nav.ml-auto
            - if user_signed_in?
              li.nav-item= link_to logout_path, class: 'nav-link' do
                => fa_icon 'sign-out'
                | Sign out
            - else
              li.nav-item= link_to login_path, class: 'nav-link' do
                => fa_icon 'sign-in'
                | Sign in as TO
    - if @tournament
      ul.nav.nav-tabs.container.dontprint
        - if policy(@tournament).show?
          li.nav-item= link_to tournament_players_path(@tournament), class: "nav-link #{'active' if controller_name == 'players' && action_name != 'standings'}" do
            => fa_icon 'users'
            | Tournament
        - if policy(@tournament).show?
          li.nav-item= link_to tournament_rounds_path(@tournament), class: "nav-link #{'active' if controller_name == 'rounds' || controller_name == 'pairings'}" do
            => fa_icon 'calendar-check-o'
            | Pairings
        - if policy(@tournament).show?
          li.nav-item= link_to standings_tournament_players_path(@tournament), class: "nav-link #{'active' if controller_name == 'players' && action_name == 'standings'}" do
            => fa_icon 'trophy'
            | Standings
        - if policy(@tournament).edit?
          li.nav-item= link_to edit_tournament_path(@tournament), class: "nav-link #{'active' if controller_name == 'tournaments'}" do
            => fa_icon 'cog'
            | Settings
    .container
      .row.py-3
        = yield
    .footer.dontprint
      .container
        .col-12 Made with 🐍 by Johno
